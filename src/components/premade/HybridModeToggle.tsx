/**
 * HybridModeToggle Component\n * \n * Interactive toggle component for switching between DIY, Premade, and\n * Hybrid preparation modes with visual indicators and mode-specific\n * guidance and benefits display.\n * \n * @example\n * ```tsx\n * <HybridModeToggle\n *   currentMode=\"hybrid\"\n *   onModeChange={(mode) => setMode(mode)}\n *   availableModes={[\"diy\", \"premade\", \"hybrid\"]}\n *   flavorProfile=\"vanilla\"\n * />\n * ```\n */\n\n'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { \n  ChefHat, \n  Coffee, \n  Home, \n  TrendingUp, \n  Clock, \n  DollarSign, \n  Award, \n  Zap,\n  CheckCircle,\n  ArrowRight,\n  Lightbulb,\n  Target,\n  Users,\n  Star\n} from 'lucide-react';\nimport { PremadeMode } from '@/lib/types';\n\n/**\n * HybridModeToggle Props\n */\ninterface HybridModeToggleProps {\n  currentMode: PremadeMode;\n  onModeChange: (mode: PremadeMode) => void;\n  availableModes?: PremadeMode[];\n  flavorProfile?: string;\n  targetCaffeine?: number;\n  budget?: number;\n  timeAvailable?: number;\n  qualityPreference?: 'basic' | 'good' | 'high' | 'premium';\n  onBenefitsChange?: (benefits: ModeBenefit[]) => void;\n  className?: string;\n}\n\n/**\n * Mode Benefit Interface\n */\ninterface ModeBenefit {\n  category: 'cost' | 'time' | 'quality' | 'convenience' | 'control';\n  description: string;\n  impact: 'low' | 'medium' | 'high';\n  score: number;\n}\n\n/**\n * Mode Information Interface\n */\ninterface ModeInfo {\n  id: PremadeMode;\n  name: string;\n  description: string;\n  icon: React.ComponentType<{ className?: string }>;\n  color: string;\n  bgColor: string;\n  benefits: string[];\n  drawbacks: string[];\n  estimatedTime: string;\n  difficulty: 'Easy' | 'Moderate' | 'Intermediate' | 'Advanced';\n  costLevel: 'Low' | 'Medium' | 'High';\n  qualityLevel: 'Basic' | 'Good' | 'High' | 'Premium';\n  bestFor: string[];\n  whenToUse: string[];\n}\n\n/**\n * Main HybridModeToggle Component\n */\nexport const HybridModeToggle: React.FC<HybridModeToggleProps> = ({\n  currentMode,\n  onModeChange,\n  availableModes = ['diy', 'premade', 'hybrid'],\n  flavorProfile = 'classic',\n  targetCaffeine = 80,\n  budget = 20,\n  timeAvailable = 30,\n  qualityPreference = 'good',\n  onBenefitsChange,\n  className = ''\n}) => {\n  const [activeTab, setActiveTab] = useState('modes');\n  const [modeBenefits, setModeBenefits] = useState<Record<PremadeMode, ModeBenefit[]>>({\n    diy: [],\n    premade: [],\n    hybrid: []\n  });\n  \n  // Mode definitions with detailed information\n  const modeDefinitions: Record<PremadeMode, ModeInfo> = {\n    diy: {\n      id: 'diy',\n      name: 'DIY Recipe',\n      description: 'Traditional homemade approach with complete ingredient control',\n      icon: ChefHat,\n      color: 'text-blue-600',\n      bgColor: 'bg-blue-100',\n      benefits: [\n        'Complete control over ingredients and quality',\n        'Freshest possible results',\n        'No artificial preservatives',\n        'Customizable to exact preferences',\n        'Potentially lower long-term costs'\n      ],\n      drawbacks: [\n        'Requires more time and skill',\n        'Need specialized equipment',\n        'Results may vary between batches',\n        'Higher initial setup costs'\n      ],\n      estimatedTime: '25-30 minutes',\n      difficulty: 'Intermediate',\n      costLevel: 'Medium',\n      qualityLevel: 'High',\n      bestFor: [\n        'Health-conscious consumers',\n        'Those who enjoy cooking/baking',\n        'Custom flavor development',\n        'Quality-focused individuals'\n      ],\n      whenToUse: [\n        'When you have time for preparation',\n        'For special occasions or events',\n        'When exact flavor control is important',\n        'If you enjoy the process of creation'\n      ]\n    },\n    premade: {\n      id: 'premade',\n      name: 'Premade Syrups',\n      description: 'Commercial syrups for quick, consistent, and professional results',\n      icon: Coffee,\n      color: 'text-green-600',\n      bgColor: 'bg-green-100',\n      benefits: [\n        '5-minute preparation time',\n        'Consistent, reliable results every time',\n        'Wide variety of flavors available',\n        'No specialized equipment needed',\n        'Professional-grade formulations'\n      ],\n      drawbacks: [\n        'Higher per-serving cost',\n        'Limited customization options',\n        'Contains preservatives',\n        'May have artificial ingredients'\n      ],\n      estimatedTime: '5 minutes',\n      difficulty: 'Easy',\n      costLevel: 'High',\n      qualityLevel: 'Good',\n      bestFor: [\n        'Busy professionals',\n        'Beginners to beverage making',\n        'Consistent quality requirements',\n        'Quick preparation needs'\n      ],\n      whenToUse: [\n        'When time is limited',\n        'For consistent daily consumption',\n        'If you prefer convenience',\n        'When trying new flavors'\n      ]\n    },\n    hybrid: {\n      id: 'hybrid',\n      name: 'Hybrid Mode',\n      description: 'Best of both worlds - syrups enhanced with custom additions',\n      icon: Home,\n      color: 'text-purple-600',\n      bgColor: 'bg-purple-100',\n      benefits: [\n        'Balanced approach with enhanced flavor',\n        'Cost-effective solution',\n        'Moderate preparation time (12-15 min)',\n        'Quality improvements over pure syrups',\n        'Customizable level of enhancement'\n      ],\n      drawbacks: [\n        'Requires some skill and knowledge',\n        'Multiple ingredient sourcing',\n        'Medium complexity level',\n        'Results may vary with technique'\n      ],\n      estimatedTime: '12-15 minutes',\n      difficulty: 'Moderate',\n      costLevel: 'Medium',\n      qualityLevel: 'High',\n      bestFor: [\n        'Those wanting to balance cost and quality',\n        'Intermediate skill level users',\n        'Regular beverage enthusiasts',\n        'Cost-conscious quality seekers'\n      ],\n      whenToUse: [\n        'For regular, quality consumption',\n        'When you want better than premade but less than full DIY',\n        'For cost optimization',\n        'When building skills gradually'\n      ]\n    }\n  };\n  \n  // Calculate mode benefits based on user preferences\n  useEffect(() => {\n    const benefits: Record<PremadeMode, ModeBenefit[]> = {\n      diy: [\n        {\n          category: 'quality',\n          description: 'Highest quality potential with fresh ingredients',\n          impact: 'high',\n          score: qualityPreference === 'premium' ? 95 : qualityPreference === 'high' ? 85 : 75\n        },\n        {\n          category: 'cost',\n          description: 'Lowest long-term cost for regular use',\n          impact: 'high',\n          score: budget > 30 ? 90 : budget > 20 ? 80 : 70\n        },\n        {\n          category: 'time',\n          description: 'Requires significant time investment',\n          impact: 'high',\n          score: timeAvailable >= 30 ? 60 : 40\n        }\n      ],\n      premade: [\n        {\n          category: 'convenience',\n          description: 'Fastest preparation with minimal effort',\n          impact: 'high',\n          score: timeAvailable >= 10 ? 95 : 85\n        },\n        {\n          category: 'quality',\n          description: 'Consistent, professional-quality results',\n          impact: 'medium',\n          score: 80\n        },\n        {\n          category: 'cost',\n          description: 'Higher per-serving cost but predictable',\n          impact: 'medium',\n          score: budget >= 25 ? 70 : budget >= 15 ? 60 : 50\n        }\n      ],\n      hybrid: [\n        {\n          category: 'cost',\n          description: 'Balanced cost between DIY and premade',\n          impact: 'medium',\n          score: 75\n        },\n        {\n          category: 'quality',\n          description: 'Enhanced quality over pure premade options',\n          impact: 'high',\n          score: 85\n        },\n        {\n          category: 'convenience',\n          description: 'Moderate time requirement with good results',\n          impact: 'medium',\n          score: timeAvailable >= 15 ? 80 : 65\n        }\n      ]\n    };\n    \n    setModeBenefits(benefits);\n    onBenefitsChange?.(benefits[currentMode]);\n  }, [budget, timeAvailable, qualityPreference, currentMode, onBenefitsChange]);\n  \n  // Handle mode change\n  const handleModeChange = (mode: PremadeMode) => {\n    onModeChange(mode);\n    onBenefitsChange?.(modeBenefits[mode]);\n  };\n  \n  // Calculate compatibility score for current flavor\n  const getFlavorCompatibility = (mode: PremadeMode): number => {\n    const baseScores = {\n      diy: 85, // DIY works well for most flavors\n      premade: 90, // Commercial syrups are designed for specific flavors\n      hybrid: 88  // Good balance for flavor enhancement\n    };\n    \n    // Adjust based on flavor complexity\n    const complexFlavors = ['vanilla', 'caramel', 'hazelnut', 'mocha'];\n    const fruitFlavors = ['raspberry', 'strawberry', 'lemon', 'lime'];\n    \n    if (complexFlavors.some(flavor => flavorProfile.includes(flavor))) {\n      return baseScores[mode] + 5;\n    }\n    \n    if (fruitFlavors.some(flavor => flavorProfile.includes(flavor))) {\n      return baseScores[mode] + (mode === 'premade' ? 8 : 3);\n    }\n    \n    return baseScores[mode];\n  };\n  \n  return (\n    <div className={`space-y-6 ${className}`}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h3 className=\"text-lg font-semibold text-gray-900\">\n            Preparation Mode\n          </h3>\n          <p className=\"text-sm text-gray-600\">\n            Choose your approach for {flavorProfile} flavor\n          </p>\n        </div>\n        <Badge variant=\"outline\" className=\"flex items-center space-x-1\">\n          <Target className=\"h-3 w-3\" />\n          <span>{currentMode.toUpperCase()}</span>\n        </Badge>\n      </div>\n      \n      {/* Mode Selection Tabs */}\n      <Tabs value={activeTab} onValueChange={setActiveTab}>\n        <TabsList className=\"grid w-full grid-cols-3\">\n          <TabsTrigger value=\"modes\" className=\"flex items-center space-x-2\">\n            <Zap className=\"h-4 w-4\" />\n            <span>Mode Selection</span>\n          </TabsTrigger>\n          <TabsTrigger value=\"comparison\" className=\"flex items-center space-x-2\">\n            <TrendingUp className=\"h-4 w-4\" />\n            <span>Comparison</span>\n          </TabsTrigger>\n          <TabsTrigger value=\"recommendations\" className=\"flex items-center space-x-2\">\n            <Lightbulb className=\"h-4 w-4\" />\n            <span>Recommendations</span>\n          </TabsTrigger>\n        </TabsList>\n        \n        {/* Mode Selection Tab */}\n        <TabsContent value=\"modes\" className=\"space-y-4\">\n          <div className=\"grid gap-4\">\n            {availableModes.map((mode) => {\n              const modeInfo = modeDefinitions[mode];\n              const Icon = modeInfo.icon;\n              const isSelected = currentMode === mode;\n              const compatibility = getFlavorCompatibility(mode);\n              const benefits = modeBenefits[mode] || [];\n              \n              return (\n                <Card \n                  key={mode}\n                  className={`cursor-pointer transition-all duration-200 hover:shadow-md ${\n                    isSelected \n                      ? 'ring-2 ring-primary border-primary shadow-lg' \n                      : 'border-gray-200 hover:border-gray-300'\n                  }`}\n                  onClick={() => handleModeChange(mode)}\n                >\n                  <CardContent className=\"p-6\">\n                    <div className=\"space-y-4\">\n                      {/* Mode Header */}\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex items-center space-x-4\">\n                          <div className={`p-3 rounded-lg ${modeInfo.bgColor}`}>\n                            <Icon className={`h-6 w-6 ${modeInfo.color}`} />\n                          </div>\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center space-x-2\">\n                              <h4 className=\"font-semibold text-lg\">{modeInfo.name}</h4>\n                              {isSelected && <CheckCircle className=\"h-5 w-5 text-primary\" />}\n                            </div>\n                            <p className=\"text-sm text-gray-600 mt-1\">\n                              {modeInfo.description}\n                            </p>\n                          </div>\n                        </div>\n                        <div className=\"text-right\">\n                          <div className=\"text-sm font-medium text-gray-900\">\n                            {compatibility}% match\n                          </div>\n                          <div className=\"w-16 bg-gray-200 rounded-full h-1.5 mt-1\">\n                            <div \n                              className=\"bg-green-500 h-1.5 rounded-full transition-all duration-300\"\n                              style={{ width: `${compatibility}%` }}\n                            />\n                          </div>\n                        </div>\n                      </div>\n                      \n                      {/* Mode Metrics */}\n                      <div className=\"grid grid-cols-3 gap-4 text-sm\">\n                        <div className=\"flex items-center space-x-2\">\n                          <Clock className=\"h-4 w-4 text-gray-400\" />\n                          <span>{modeInfo.estimatedTime}</span>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <Users className=\"h-4 w-4 text-gray-400\" />\n                          <span>{modeInfo.difficulty}</span>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <DollarSign className=\"h-4 w-4 text-gray-400\" />\n                          <span>{modeInfo.costLevel} Cost</span>\n                        </div>\n                      </div>\n                      \n                      {/* Top Benefits */}\n                      <div className=\"space-y-2\">\n                        <div className=\"text-sm font-medium text-gray-700\">Key Benefits</div>\n                        <div className=\"flex flex-wrap gap-2\">\n                          {modeInfo.benefits.slice(0, 3).map((benefit, index) => (\n                            <Badge key={index} variant=\"secondary\" className=\"text-xs\">\n                              {benefit}\n                            </Badge>\n                          ))}\n                        </div>\n                      </div>\n                      \n                      {/* Selection Button */}\n                      <div className=\"flex items-center justify-between pt-2 border-t border-gray-100\">\n                        <div className=\"flex items-center space-x-2\">\n                          <Star className=\"h-4 w-4 text-yellow-400 fill-current\" />\n                          <span className=\"text-sm font-medium\">\n                            {modeInfo.qualityLevel} Quality\n                          </span>\n                        </div>\n                        <Button \n                          variant={isSelected ? \"default\" : \"outline\"}\n                          size=\"sm\"\n                          className=\"flex items-center space-x-1\"\n                        >\n                          {isSelected ? (\n                            <>\n                              <CheckCircle className=\"h-4 w-4\" />\n                              <span>Selected</span>\n                            </>\n                          ) : (\n                            <>\n                              <span>Select</span>\n                              <ArrowRight className=\"h-4 w-4\" />\n                            </>\n                          )}\n                        </Button>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              );\n            })}\n          </div>\n        </TabsContent>\n        \n        {/* Comparison Tab */}\n        <TabsContent value=\"comparison\" className=\"space-y-4\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"text-base\">Detailed Mode Comparison</CardTitle>\n              <CardDescription>\n                Side-by-side analysis of all available modes\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-6\">\n                {(['time', 'cost', 'quality', 'convenience'] as const).map((factor) => (\n                  <div key={factor} className=\"space-y-3\">\n                    <h4 className=\"font-medium text-gray-900 capitalize flex items-center space-x-2\">\n                      {factor === 'time' && <Clock className=\"h-4 w-4\" />}\n                      {factor === 'cost' && <DollarSign className=\"h-4 w-4\" />}\n                      {factor === 'quality' && <Award className=\"h-4 w-4\" />}\n                      {factor === 'convenience' && <Zap className=\"h-4 w-4\" />}\n                      <span>{factor} Comparison</span>\n                    </h4>\n                    <div className=\"space-y-2\">\n                      {availableModes.map((mode) => {\n                        const benefits = modeBenefits[mode] || [];\n                        const benefit = benefits.find(b => b.category === factor);\n                        const score = benefit?.score || 50;\n                        \n                        return (\n                          <div key={mode} className=\"flex items-center space-x-3\">\n                            <div className=\"w-20 text-sm font-medium text-gray-700 capitalize\">\n                              {mode}\n                            </div>\n                            <div className=\"flex-1\">\n                              <Progress value={score} className=\"h-2\" />\n                            </div>\n                            <div className=\"w-12 text-sm text-gray-600\">\n                              {score}%\n                            </div>\n                          </div>\n                        );\n                      })}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n        \n        {/* Recommendations Tab */}\n        <TabsContent value=\"recommendations\" className=\"space-y-4\">\n          <div className=\"grid gap-4\">\n            {/* Smart Recommendations */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-base flex items-center space-x-2\">\n                  <Lightbulb className=\"h-5 w-5 text-yellow-500\" />\n                  <span>Smart Recommendations</span>\n                </CardTitle>\n                <CardDescription>\n                  Based on your preferences and constraints\n                </CardDescription>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                {/* Recommendation based on time */}\n                {timeAvailable <= 10 && (\n                  <div className=\"flex items-start space-x-3 p-3 bg-green-50 rounded-lg\">\n                    <CheckCircle className=\"h-5 w-5 text-green-600 mt-0.5\" />\n                    <div>\n                      <div className=\"font-medium text-green-800\">Time-Constrained?</div>\n                      <div className=\"text-sm text-green-700\">\n                        Premade syrups are perfect for quick preparation (5 minutes)\n                      </div>\n                    </div>\n                  </div>\n                )}\n                \n                {/* Recommendation based on budget */}\n                {budget < 15 && (\n                  <div className=\"flex items-start space-x-3 p-3 bg-blue-50 rounded-lg\">\n                    <DollarSign className=\"h-5 w-5 text-blue-600 mt-0.5\" />\n                    <div>\n                      <div className=\"font-medium text-blue-800\">Budget-Conscious?</div>\n                      <div className=\"text-sm text-blue-700\">\n                        DIY recipes offer the best long-term value for regular use\n                      </div>\n                    </div>\n                  </div>\n                )}\n                \n                {/* Recommendation based on quality preference */}\n                {qualityPreference === 'premium' && (\n                  <div className=\"flex items-start space-x-3 p-3 bg-purple-50 rounded-lg\">\n                    <Award className=\"h-5 w-5 text-purple-600 mt-0.5\" />\n                    <div>\n                      <div className=\"font-medium text-purple-800\">Premium Quality?</div>\n                      <div className=\"text-sm text-purple-700\">\n                        DIY recipes provide the highest quality and customization\n                      </div>\n                    </div>\n                  </div>\n                )}\n                \n                {/* General recommendation */}\n                <div className=\"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg\">\n                  <TrendingUp className=\"h-5 w-5 text-gray-600 mt-0.5\" />\n                  <div>\n                    <div className=\"font-medium text-gray-800\">Balanced Approach?</div>\n                    <div className=\"text-sm text-gray-700\">\n                      Hybrid mode offers the best balance of quality, convenience, and cost\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n            \n            {/* Best Practices */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-base\">Best Practices by Mode</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  {availableModes.map((mode) => {\n                    const modeInfo = modeDefinitions[mode];\n                    return (\n                      <div key={mode} className=\"space-y-2\">\n                        <h4 className=\"font-medium text-gray-900\">{modeInfo.name}</h4>\n                        <div className=\"text-sm text-gray-600 space-y-1\">\n                          {modeInfo.whenToUse.map((when, index) => (\n                            <div key={index} className=\"flex items-start space-x-2\">\n                              <CheckCircle className=\"h-3 w-3 text-green-500 mt-0.5 flex-shrink-0\" />\n                              <span>{when}</span>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n};\n\nexport default HybridModeToggle;"