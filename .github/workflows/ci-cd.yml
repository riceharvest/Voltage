   test:
     needs: build
     runs-on: ubuntu-latest
     steps:
     - uses: actions/checkout@v4
     - name: Setup Node.js
       uses: actions/setup-node@v4
       with:
         node-version: '18'
         cache: 'npm'
     - name: Install dependencies
       run: npm ci
     - name: Run lint
       run: npm run lint
     - name: Run unit tests
       run: npm run test:run
     - name: Run unit tests with coverage
       run: npm run test:coverage
     - name: Run e2e tests
       run: npx playwright test
     - name: Dependency review
       uses: actions/dependency-review-action@v4
       if: github.event_name == 'pull_request'
     - name: Security scan
       run: npm audit --audit-level high
      - name: Snyk security scan
        run: npm run security:snyk
        env:
          SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
     - name: Run Lighthouse CI
       run: npx lhci autorun
       if: github.event_name == 'pull_request'